"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[322],{6322:($,_,r)=>{r.r(_),r.d(_,{EntrenamientosModule:()=>G});var c=r(9808),d=r(1083),u=r(9783),E=r(8505),C=r(4004),t=r(5e3),T=r(384),x=r(484),b=r(97),g=r(845),y=r(9114),A=r(2726);function U(n,i){1&n&&(t.TgZ(0,"div",2),t._UZ(1,"span",3),t.qZA())}const M=function(){return["./crearEntrenamiento"]};function F(n,i){1&n&&(t.TgZ(0,"div",8)(1,"span",9),t._UZ(2,"button",10),t.qZA()()),2&n&&(t.xp6(2),t.Q6J("routerLink",t.DdM(1,M)))}function I(n,i){1&n&&(t.TgZ(0,"div",11)(1,"h2"),t._uU(2,"No hay entrenamientos disponibles"),t.qZA()())}function w(n,i){1&n&&t._UZ(0,"th",17)}function J(n,i){if(1&n&&(t.TgZ(0,"tr")(1,"th",17),t._uU(2,"Fecha"),t.qZA(),t.TgZ(3,"th",17),t._uU(4,"Hora"),t.qZA(),t.TgZ(5,"th",17),t._uU(6,"Descripcion"),t.qZA(),t.YNc(7,w,1,0,"th",18),t.qZA()),2&n){const e=t.oxw(3);t.xp6(7),t.Q6J("ngIf",e.authUser.role_id<3)}}const v=function(){return{"margin-left":".5em"}},Y=function(n){return["./editarEntrenamiento",n]};function L(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"td"),t._UZ(1,"p-button",20),t.TgZ(2,"p-button",21),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit;return t.oxw(3).confirm2(a)}),t.qZA()()}if(2&n){const e=t.oxw().$implicit;t.xp6(1),t.Akn(t.DdM(5,v)),t.Q6J("routerLink",t.VKq(6,Y,e.id)),t.xp6(1),t.Akn(t.DdM(8,v))}}function N(n,i){if(1&n&&(t.TgZ(0,"tr")(1,"td",17),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"td",17),t._uU(5),t.qZA(),t.TgZ(6,"td",17),t._uU(7),t.qZA(),t.YNc(8,L,3,9,"td",19),t.qZA()),2&n){const e=i.$implicit,o=t.oxw(3);t.xp6(2),t.hij(" ",t.xi3(3,4,e.fecha,"dd/MM/yyyy")," "),t.xp6(3),t.hij(" ",e.hora.substring(0,5)," "),t.xp6(2),t.Oqu(e.descripcion),t.xp6(1),t.Q6J("ngIf",o.authUser.role_id<3)}}function q(n,i){if(1&n&&(t._UZ(0,"p-confirmDialog",12),t.TgZ(1,"div",13)(2,"p-table",14),t.YNc(3,J,8,1,"ng-template",15),t.YNc(4,N,9,7,"ng-template",16),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("value",e.entrenamientos)("scrollable",!0)}}function Q(n,i){if(1&n&&(t._UZ(0,"p-messages",4),t.YNc(1,F,3,2,"div",5),t.YNc(2,I,3,0,"div",6),t.YNc(3,q,5,2,"ng-template",null,7,t.W1O)),2&n){const e=t.MAs(4),o=t.oxw();t.Q6J("value",o.msgs),t.xp6(1),t.Q6J("ngIf",o.authUser.role_id<3),t.xp6(1),t.Q6J("ngIf",0===o.entrenamientos.length)("ngIfElse",e)}}let j=(()=>{class n{constructor(e,o,a){this.as=e,this.ens=o,this.confirmationService=a,this.msgs=[],this.entrenamientos=[],this.aux=!1}ngOnInit(){this.authUser=this.as.auth,this.ens.entrenamientosUsuario().subscribe(e=>{this.aux=!0,this.entrenamientos=e})}confirm2(e){this.confirmationService.confirm({message:"\xbfEst\xe1s seguro de eliminar este entrenamiento?",header:"Eliminar entrenamiento",icon:"pi pi-info-circle",accept:()=>{this.ens.borrarEntrenamiento(e.id).pipe((0,E.b)(o=>this.aux=!1),(0,C.U)(o=>this.msgs=[{severity:"info",summary:"Confirmado",detail:"Entrenamiento eliminado"}])).subscribe(o=>{this.ens.entrenamientosUsuario().subscribe(a=>{this.aux=!0,this.entrenamientos=a})})}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(T.e),t.Y36(x.J),t.Y36(u.YP))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-listado-entrenamientos"]],features:[t._Bn([u.YP])],decls:3,vars:2,consts:[["class","m-0 vh-100 row justify-content-center align-items-center",4,"ngIf","ngIfElse"],["info",""],[1,"m-0","vh-100","row","justify-content-center","align-items-center"],[1,"loader","col-auto","text-center","p-5"],[3,"value"],["class","row text-center m-4",4,"ngIf"],["class","frase",4,"ngIf","ngIfElse"],["tabla",""],[1,"row","text-center","m-4"],["span","",1,"p-buttonset","text-center"],["pButton","","type","button","label","A\xf1adir entrenamiento","icon","pi pi-plus","iconPos","right",3,"routerLink"],[1,"frase"],["header","Confirmation","icon","pi pi-exclamation-triangle"],[1,"content"],["scrollHeight","100%",3,"value","scrollable"],["pTemplate","header"],["pTemplate","body"],[2,"min-width","200px"],["style","min-width: 200px",4,"ngIf"],[4,"ngIf"],["label","Editar","icon","pi pi-pencil","iconPos","right","styleClass","p-button-secondary",3,"routerLink"],["icon","pi pi-times","label","Eliminar","iconPos","right","styleClass","p-button-danger",3,"click"]],template:function(e,o){if(1&e&&(t.YNc(0,U,2,0,"div",0),t.YNc(1,Q,5,4,"ng-template",null,1,t.W1O)),2&e){const a=t.MAs(2);t.Q6J("ngIf",!o.aux)("ngIfElse",a)}},directives:[c.O5,b.V,g.Hq,d.rH,y.Q,A.iA,u.jx,g.zx],pipes:[c.uU],styles:['@import"https://fonts.googleapis.com/css2?family=Baloo+Tamma+2:wght@700&display=swap";img[_ngcontent-%COMP%]{width:100px}.loader[_ngcontent-%COMP%]{width:48px;height:48px;border:5px dotted #bcd8c1;border-radius:50%;display:inline-block;position:relative;box-sizing:border-box;animation:rotation 2s linear infinite}@keyframes rotation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.frase[_ngcontent-%COMP%]{width:100%}h2[_ngcontent-%COMP%]{font-family:"Baloo Tamma 2";text-align:center;width:100%;margin:-40px auto 0;color:#fff;font-size:5vw;letter-spacing:5px;top:50%;position:absolute;text-shadow:-1px -1px 0px #bcd8c1,3px 3px 0px #bcd8c1,6px 6px 0px #98d4a3}']}),n})();var s=r(3075),O=r(3900),z=r(5652),P=r(3407);function R(n,i){1&n&&(t.TgZ(0,"div",2),t._UZ(1,"span",3),t.qZA())}function D(n,i){if(1&n&&(t.TgZ(0,"small",18),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij("",e.fechaMsg," ")}}function B(n,i){if(1&n&&(t.TgZ(0,"small",18),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij("",e.horaMsg," ")}}function H(n,i){if(1&n&&(t.TgZ(0,"small",18),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij("",e.descMsg," ")}}function V(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"h2",4),t._uU(1),t.qZA(),t.TgZ(2,"form",5),t.NdJ("submit",function(){return t.CHM(e),t.oxw().guardar()}),t.TgZ(3,"div",6),t._UZ(4,"div",7),t.TgZ(5,"div",8)(6,"span",9),t._uU(7,"D\xeda del entrenamiento"),t.qZA(),t._UZ(8,"div",10)(9,"p-calendar",11)(10,"div",10),t.YNc(11,D,2,1,"small",12),t.qZA(),t.TgZ(12,"div",13)(13,"span",9),t._uU(14,"Hora del entrenamiento"),t.qZA(),t._UZ(15,"input",14),t.YNc(16,B,2,1,"small",12),t.qZA(),t.TgZ(17,"div",13)(18,"span",9),t._uU(19,"Descripcion"),t.qZA(),t._UZ(20,"div",10)(21,"textarea",15)(22,"div",10),t.YNc(23,H,2,1,"small",12),t.qZA()(),t.TgZ(24,"div",16),t._UZ(25,"p-button",17),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.entrenamiento?"Editar":"Nuevo"," Entrenamiento "),t.xp6(1),t.Q6J("formGroup",e.miFormulario),t.xp6(9),t.Q6J("ngIf",e.error("fecha")),t.xp6(5),t.Q6J("ngIf",e.error("hora")),t.xp6(5),t.Q6J("rows",5)("cols",30)("autoResize",!0),t.xp6(2),t.Q6J("ngIf",e.error("descripcion"))}}let Z=(()=>{class n{constructor(e,o,a,l){this.ens=e,this.fb=o,this.router=a,this.activatedRoute=l,this.miFormulario=this.fb.group({fecha:["",[s.kI.required]],hora:["",[s.kI.required]],descripcion:["",[s.kI.required]]}),this.entrenamiento=void 0,this.aux=!1}ngOnInit(){this.router.url.includes("editarEntrenamiento")?this.activatedRoute.params.pipe((0,O.w)(({id:e})=>this.ens.getEntrenamiento(e))).subscribe(e=>{this.aux=!0,this.entrenamiento=e,this.miFormulario.reset({fecha:new Date(this.entrenamiento.fecha),hora:this.entrenamiento.hora,descripcion:this.entrenamiento.descripcion}),console.log(this.miFormulario.getRawValue())}):this.aux=!0}get fechaMsg(){var e;const o=null===(e=this.miFormulario.get("fecha"))||void 0===e?void 0:e.errors;return(null==o?void 0:o.required)?"Seleccione el d\xeda del partido":""}get horaMsg(){var e;const o=null===(e=this.miFormulario.get("hora"))||void 0===e?void 0:e.errors;return(null==o?void 0:o.required)?"Seleccione la hora del partido":""}get descMsg(){var e;const o=null===(e=this.miFormulario.get("descripcion"))||void 0===e?void 0:e.errors;return(null==o?void 0:o.required)?"Rellene la descripci\xf3n del entrenamiento":""}error(e){var o,a,l,m;return(null===(a=null===(o=this.miFormulario.controls)||void 0===o?void 0:o[e])||void 0===a?void 0:a.errors)&&(null===(m=null===(l=this.miFormulario.controls)||void 0===l?void 0:l[e])||void 0===m?void 0:m.touched)}guardar(){var e,o,a,l,m;this.miFormulario.invalid?this.miFormulario.markAllAsTouched():(null===(e=this.entrenamiento)||void 0===e?void 0:e.id)?(null===(o=this.miFormulario.get("fecha"))||void 0===o||o.setValue((0,c.p6)(null===(a=this.miFormulario.get("fecha"))||void 0===a?void 0:a.value,"yyyy-MM-dd","en")),this.ens.actualizarEntrenamiento(this.entrenamiento.id,this.miFormulario.getRawValue()).subscribe(f=>{console.log(f),this.router.navigate(["/inicio/entrenamientos"])})):(null===(l=this.miFormulario.get("fecha"))||void 0===l||l.setValue((0,c.p6)(null===(m=this.miFormulario.get("fecha"))||void 0===m?void 0:m.value,"yyyy-MM-dd","en")),this.ens.crearEntrenamiento(this.miFormulario.getRawValue()).subscribe(f=>{var h;console.log(null===(h=this.miFormulario.get("fecha"))||void 0===h?void 0:h.value),this.router.navigate(["/inicio/entrenamientos"]),console.log(f)}))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(x.J),t.Y36(s.qu),t.Y36(d.F0),t.Y36(d.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-crear-entrenamiento"]],decls:3,vars:2,consts:[["class","m-0 vh-100 row justify-content-center align-items-center",4,"ngIf","ngIfElse"],["info",""],[1,"m-0","vh-100","row","justify-content-center","align-items-center"],[1,"loader","col-auto","text-center","p-5"],[1,"text-center","mt-2"],[3,"formGroup","submit"],[1,"row","m-5","justify-content-center"],[1,"col-3"],[1,"col-12","col-xs-12","col-sm-12","col-md-12","col-lg-1","mb-3"],[1,"form-text"],[1,"col"],["formControlName","fecha"],["class","text-danger","id","",4,"ngIf"],[1,"col-12","col-xs-12","col-sm-12","col-md-12","col-lg-4","mb-3"],["formControlName","hora","type","time","id","appt","name","appt","min","09:00","max","21:00","required","",1,"form-control"],["formControlName","descripcion","pInputTextarea","",3,"rows","cols","autoResize"],[1,"m-5"],["label","Guardar","type","submit","icon","pi pi-check","iconPos","right",1,"float-end"],["id","",1,"text-danger"]],template:function(e,o){if(1&e&&(t.YNc(0,R,2,0,"div",0),t.YNc(1,V,26,8,"ng-template",null,1,t.W1O)),2&e){const a=t.MAs(2);t.Q6J("ngIf",!o.aux)("ngIfElse",a)}},directives:[c.O5,s._Y,s.JL,s.sg,z.f,s.JJ,s.u,s.Fj,s.Q7,P.g,g.zx],styles:[".loader[_ngcontent-%COMP%]{width:48px;height:48px;border:5px dotted #bcd8c1;border-radius:50%;display:inline-block;position:relative;box-sizing:border-box;animation:rotation 2s linear infinite}@keyframes rotation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]}),n})();var p=r(7538);const W=[{path:"",children:[{path:"",component:j},{path:"crearEntrenamiento",component:Z,canActivate:[p.W],canLoad:[p.W]},{path:"editarEntrenamiento/:id",component:Z,canActivate:[p.W],canLoad:[p.W]},{path:"**",redirectTo:""}]}];let S=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[d.Bz.forChild(W)],d.Bz]}),n})();var k=r(6559);let G=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[c.ez,S,k.g]]}),n})()}}]);